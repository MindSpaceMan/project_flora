### Login — получить access_token и refresh_token
POST http://127.0.0.1:8337/api/login
Accept: application/json
Content-Type: application/json

{
  "email": "admin@floramix.ru",
  "password": "admin123"
}

> {%
    // Безопасный парсинг
    const raw = response.body;
    const data = (typeof raw === 'string') ? JSON.parse(raw) : raw;

    if (!data || !data.token) {
        throw new Error("Ответ логина не содержит token. Тело: " + (typeof raw === 'string' ? raw : JSON.stringify(raw)));
    }

    client.global.set("access_token", data.token);
    if (data.refresh_token) {
        client.global.set("refresh_token", data.refresh_token);
    }
%}

### Пример запроса с Bearer
GET http://127.0.0.1:8337/api/categories
Accept: application/json
Authorization: Bearer {{access_token}}

### Обновить access_token по refresh_token
POST http://127.0.0.1:8337/api/token/refresh
Accept: application/json
Content-Type: application/json

{
  "refresh_token": "{{refresh_token}}"
}

> {%
    const raw = response.body;
    const data = (typeof raw === 'string') ? JSON.parse(raw) : raw;

    if (!data || !data.token) {
        throw new Error("Ответ refresh не содержит token. Тело: " + (typeof raw === 'string' ? raw : JSON.stringify(raw)));
    }

    client.global.set("access_token", data.token);
%}

### (опция) Сбросить сохранённые токены
# > {% client.global.clear("access_token"); client.global.clear("refresh_token"); %}